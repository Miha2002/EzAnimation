{% extends "base.html" %}

{% block content %}
    <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/processing.css') }}">

    <div class="item-container">
        <h1>Processing your file, please wait</h1>
        <img id="loading-gif" src="../static/styles/img/loading.gif" alt="loading-gif">
    </div>
    <script>
        // Function to call the process endpoint
        function callProcess() {
            fetch('/process')  // Call the process endpoint
                .then(response => {
                    if (response.ok) {
                        // Redirect to the download page once processing is complete
                        window.location.href = '/download';
                    } else {
                        // Handle errors if needed
                        console.error('Error processing file');
                    }
                })
                .catch(error => {
                    console.error('Error processing file:', error);
                });
        }

        // Call the process function once the page is loaded
        window.onload = function() {
            callProcess();
        };
    </script>
{% endblock %}